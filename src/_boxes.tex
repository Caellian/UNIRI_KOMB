
\newtcolorbox{borderbox}[5][]{
    enhanced,
    breakable,
    title=#3,
    fonttitle=\sffamily\bfseries,
    before skip=\baselineskip,
    frame style={color=#4},
    colback=#5,
    overlay unbroken and first={
        \node[anchor=north west,inner sep=2pt] at (title.north west) {\textcolor{#5}{#2}};
    },
    #1
}

\definecolor{colorexamplebg}{HTML}{DDF7F4}
\definecolor{colorexamplefg}{HTML}{27B29F}

\newcounter{examplecounter}[section]
\NewDocumentEnvironment{example}{ o +b }{
    \refstepcounter{examplecounter} 
    \IfValueTF{#1}
        {\begin{borderbox}{\faPencil}{Primjer \theexamplecounter: #1}{colorexamplefg}{colorexamplebg}}
        {\begin{borderbox}{\faPencil}{Primjer \theexamplecounter}{colorexamplefg}{colorexamplebg}}
    #2
}{
    \end{borderbox}
}

\definecolor{colordefinitionbg}{HTML}{C5E0FC}
\definecolor{colordefinitionfg}{HTML}{0E7EF1}

\newcounter{definitioncounter}[section]
\NewDocumentEnvironment{definition}{ o +b }{
    \refstepcounter{definitioncounter} 
    \IfValueTF{#1}
        {\begin{borderbox}{\faBookmark}{Definicija \thedefinitioncounter: #1}{colordefinitionfg}{colordefinitionbg}}
        {\begin{borderbox}{\faBookmark}{Definicija \thedefinitioncounter}{colordefinitionfg}{colordefinitionbg}}
    #2
}{
    \end{borderbox}
}

\newcounter{theoremcounter}[section]
\NewDocumentEnvironment{theorem}{ o +b }{
    \refstepcounter{theoremcounter} 
    \IfValueTF{#1}
        {\begin{borderbox}{\faCheckCircle}{Teorem \thetheoremcounter: #1}{colordefinitionfg}{colordefinitionbg}}
        {\begin{borderbox}{\faCheckCircle}{Teorem \thetheoremcounter}{colordefinitionfg}{colordefinitionbg}}
    #2
}{
    \end{borderbox}
}

\newcounter{corollarycounter}[section]
\NewDocumentEnvironment{corollary}{ o +b }{
    \refstepcounter{corollarycounter} 
    \IfValueTF{#1}
        {\begin{borderbox}{\faInfoCircle}{Korolar \thecorollarycounter: #1}{colordefinitionfg}{colordefinitionbg}}
        {\begin{borderbox}{\faInfoCircle}{Korolar \thecorollarycounter}{colordefinitionfg}{colordefinitionbg}}
    #2
}{
    \end{borderbox}
}

\definecolor{colorproblembg}{HTML}{FCD8C5}
\definecolor{colorproblemfg}{HTML}{F13B0E}

\NewDocumentEnvironment{problem}{ o +b }{
    \IfValueTF{#1}
        {\begin{borderbox}{\faCogs}{Zadatak: #1}{colorproblemfg}{colorproblembg}}
        {\begin{borderbox}{\faCogs}{Zadatak}{colorproblemfg}{colorproblembg}}
    #2
}{
    \end{borderbox}
}
